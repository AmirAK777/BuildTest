import{a as ft}from"./chunk-2HSFKMMO.js";import{b as ut}from"./chunk-IN3GSI2U.js";import{a as C,c as M,e as Z,f as B,g as F,h as z,i as j,j as mt,k as pt}from"./chunk-FWA4ZV65.js";import{$ as _,A as p,Ab as K,Bb as Q,Db as X,E as r,Eb as tt,Fa as P,J as $,Mb as et,Na as L,Nb as nt,O as u,Ob as it,P as f,Pb as ot,Ra as O,Rb as at,Ub as rt,Wb as st,X as A,Xb as ct,Y as s,_ as T,aa as v,b as w,ba as g,bc as lt,ca as k,dc as dt,ea as U,fa as D,ga as i,ha as n,hb as V,ia as m,ja as h,ka as b,la as d,lb as R,o as y,qb as H,ra as o,rb as q,sa as W,sb as N,ta as x,tb as Y,va as E,x as S,yb as G,zb as J}from"./chunk-J4QSXUO7.js";import"./chunk-GCD5ODGY.js";import"./chunk-7N27NNS6.js";import"./chunk-NUA2LQHF.js";import"./chunk-FXHXDGTP.js";import"./chunk-G3CV3VGG.js";import"./chunk-OOOHFHRH.js";import"./chunk-XDG22ATE.js";import"./chunk-H5GYM6DM.js";import"./chunk-4WFVMWDK.js";import"./chunk-52SVZWMH.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import"./chunk-KZZABCGY.js";var gt=(()=>{class t{constructor(){this.apiClovisUrl="https://localhost:5001",this._httpClient=r(L)}getAccounts(){return this._httpClient.get(`${this.apiClovisUrl}/customer/accounts`)}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var xt={accounts:null,isLoading:!1},ht=M({providedIn:"root"},F(xt),B((t,l=r(gt))=>({getAccounts:z(w(S(()=>C(t,{isLoading:!0})),y(()=>l.getAccounts().pipe(j({next:e=>C(t,{isLoading:!1,accounts:e}),error:()=>C(t,{isLoading:!1})})))))})),Z({onInit(t){t.getAccounts()}}));var bt=(()=>{class t{constructor(){this._store=r(ht)}getAccounts(){this._store.getAccounts()}get accounts(){return this._store.accounts}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ct(t,l){t&1&&m(0,"ion-spinner",10)}function vt(t,l){if(t&1&&(i(0,"ion-row",11),m(1,"iframe",12),n()),t&2){let e=d(2);s(),v("src",e.sanitizedWidgetLink,A)}}function It(t,l){if(t&1){let e=h();i(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o(3,"Ajouter un compte"),n(),i(4,"ion-buttons",8)(5,"ion-button",9),b("click",function(){u(e);let c=d();return f(c.setOpen(!1))}),o(6,"Fermer"),n()()()(),i(7,"ion-content"),_(8,Ct,1,0,"ion-spinner",10)(9,vt,2,1,"ion-row",11),n()}if(t&2){let e=d();s(8),g(e.isLoading$$()?8:-1),s(),g(e.showWidget$$()&&e.isWidget$$()?9:-1)}}function wt(t,l){if(t&1&&(i(0,"ion-card")(1,"ion-card-content")(2,"ion-row")(3,"ion-col")(4,"p"),o(5),n(),i(6,"P"),o(7),n()(),i(8,"ion-col",19)(9,"P"),o(10,"Assurance vie"),n(),i(11,"p"),o(12),n()()()()()),t&2){let e=l.$implicit;s(5),W(e.name),s(2),x(" ",e.balance,""),s(5),x("+ ",e.savings==null?null:e.savings.yield_rate," %")}}function yt(t,l){if(t&1){let e=h();i(0,"ion-segment-view")(1,"ion-segment-content",13)(2,"ion-grid")(3,"ion-row")(4,"ion-col")(5,"ion-text",14),o(6),n()()(),i(7,"ion-row")(8,"ion-col")(9,"ion-text",15),o(10," SOLDE TOTAL "),n()()(),i(11,"ion-row")(12,"ion-col")(13,"ion-text",16),o(14," Synchronis\xE9 \xE0 09h43 "),n()()()()()(),i(15,"ion-fab",17)(16,"ion-fab-button",9),b("click",function(){u(e);let c=d();return f(c.showWidget())}),m(17,"ion-icon",18),n()(),U(18,wt,13,3,"ion-card",null,k)}if(t&2){let e=d();s(6),x(" ",e.calculateTotalBalance(e.accounts$$())," \u20AC "),s(12),D(e.accounts$$())}}function St(t,l){if(t&1){let e=h();i(0,"ion-button",20),b("click",function(){u(e);let c=d();return f(c.showWidget())}),o(1,"Compl\xE9ter mon patrimoine"),n()}}var ne=(()=>{class t{setOpen(e){this.showWidget$$.set(!1)}constructor(){this._customerApp=r(ut),this._sanitizer=r(O),this._platform=r(V),this._accountApp=r(bt),this.isLinxoId$$=this._customerApp.isLinxoId,this.isLoading$$=this._customerApp.isLoading,this.isWidgetLink$$=this._customerApp.widgetBankLinks,this.isWidget$$=this._customerApp.isWidget,this.accounts$$=this._accountApp.accounts,this.showWidget$$=T(!1),this.showIframe=!1,this.isModalOpen=!1,this.widgetEffect=P(()=>{this.isWidget$$()&&(this.sanitizedWidgetLink=this._sanitizer.bypassSecurityTrustResourceUrl(this.isWidgetLink$$()?._links?.add_connection))},{allowSignalWrites:!0}),mt({add:pt})}ngOnInit(){this.isLinxoId$$()||this._customerApp.createBankUser(),console.info("accounrt",this.accounts$$())}calculateTotalBalance(e){return!e||e.length===0?0:e.reduce((a,c)=>a+(c.balance||0),0)}showWidget(){this.isWidget$$()||this.getWidgetByPlatfrom(),this.showWidget$$.set(!0)}getWidgetByPlatfrom(){this._platform.is("desktop")?this._customerApp.getBankWidget(!0,!0):this._customerApp.getBankWidget(!1,!1)}closeWidget(){this.showWidget$$.set(!1)}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=$({type:t,selectors:[["clovis-assets"]],standalone:!0,features:[E],decls:13,vars:2,consts:[["title","Patrimoine","route","settings"],["fullscreen","true",1,"ion-padding"],["value","total",1,"menu"],["value","total","content-id","total"],["value","financier","content-id","financier"],["value","immobilier","content-id","immobilier"],["backdropDismiss","false",3,"isOpen"],["expand","block",1,"clovis"],["slot","end"],[3,"click"],["name","circular","color","dark"],[1,"ion-justify-content-center","full-height"],["title","Linxo Widget",1,"iframe-full-height",3,"src"],["id","total"],[1,"balance-amount"],[1,"balance-label"],[1,"sync-info"],["slot","fixed","vertical","bottom","horizontal","end"],["name","add"],[1,"ion-text-end"],["expand","block",1,"clovis",3,"click"]],template:function(a,c){if(a&1&&(m(0,"clovis-header",0),i(1,"ion-content",1)(2,"ion-segment",2)(3,"ion-segment-button",3),o(4," Total "),n(),i(5,"ion-segment-button",4),o(6," Financier "),n(),i(7,"ion-segment-button",5),o(8," Immobilier "),n()(),i(9,"ion-modal",6),_(10,It,10,2,"ng-template"),n(),_(11,yt,20,1)(12,St,2,0,"ion-button",7),n()),a&2){let I;s(9),v("isOpen",c.showWidget$$()),s(2),g(((I=c.accounts$$())==null?null:I.length)!==0?11:12)}},dependencies:[at,R,tt,ct,st,q,K,Q,lt,X,Y,rt,N,G,nt,J,ft,et,dt,H,ot,it],styles:["ion-content[_ngcontent-%COMP%]{--background: transparent linear-gradient(178deg, #f1f8fe 0%, #ffffff 100%) 0% 0% no-repeat padding-box}ion-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1em;font-family:SofiaPro,sans-serif;font-weight:500}ion-segment-content[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;justify-content:center;font-family:SofiaPro,sans-serif;font-weight:500}.full-height[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.iframe-full-height[_ngcontent-%COMP%]{width:99%;height:99%;border:none}.balance-amount[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;font-family:SofiaPro,sans-serif;color:#000}.balance-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;color:#00053b}.sync-info[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#c8c8c8}ion-spinner[_ngcontent-%COMP%]{top:50%;left:50%;position:fixed;transform:translate(-50%,-50%)}"]})}}return t})();export{ne as AssetsComponent};
