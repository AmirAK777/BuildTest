import{a as W,b as jt,c as $t,d as Wt,e as Yt,f as Vt,g as qt,h as be,i as we,j as ln,l as Re,n as it}from"./chunk-FWA4ZV65.js";import{$a as tt,$b as un,A as ie,B as Ot,C as Pt,Da as Ke,E as A,Eb as tn,Fa as kt,Fb as nn,Hb as rn,J as De,K as Mt,Ka as Ft,La as He,Ma as Qe,Mb as on,Na as Ut,Sa as Xe,Ta as zt,U as Lt,Ub as an,Va as Gt,Vb as sn,W as Bt,Wa as Kt,Xa as J,Xb as cn,Y as me,Ya as Je,Za as Ze,_a as et,aa as ae,ab as Ht,b as ye,bb as nt,cc as fn,db as Qt,e as Tt,eb as Xt,fb as rt,ga as D,gb as ot,ha as P,i as We,ia as V,ib as Jt,j as fe,k as Ye,ka as Ge,m as At,n as Ve,o as _e,p as le,qb as Zt,ra as $,v as qe,va as Ne,w as xe,x as de,zb as en}from"./chunk-J4QSXUO7.js";import{c as ge,f as gr,g as yr}from"./chunk-KZZABCGY.js";var mn=gr((dn,at)=>{"use strict";(function(s){if(typeof dn=="object"&&typeof at<"u")at.exports=s();else if(typeof define=="function"&&define.amd)define([],s);else{var p;typeof window<"u"?p=window:typeof global<"u"?p=global:typeof self<"u"?p=self:p=this,p.localforage=s()}})(function(){var s,p,f;return function m(b,T,y){function C(U,H){if(!T[U]){if(!b[U]){var v=typeof ge=="function"&&ge;if(!H&&v)return v(U,!0);if(N)return N(U,!0);var _=new Error("Cannot find module '"+U+"'");throw _.code="MODULE_NOT_FOUND",_}var M=T[U]={exports:{}};b[U][0].call(M.exports,function(B){var Q=b[U][1][B];return C(Q||B)},M,M.exports,m,b,T,y)}return T[U].exports}for(var N=typeof ge=="function"&&ge,j=0;j<y.length;j++)C(y[j]);return C}({1:[function(m,b,T){(function(y){"use strict";var C=y.MutationObserver||y.WebKitMutationObserver,N;if(C){var j=0,U=new C(B),H=y.document.createTextNode("");U.observe(H,{characterData:!0}),N=function(){H.data=j=++j%2}}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var v=new y.MessageChannel;v.port1.onmessage=B,N=function(){v.port2.postMessage(0)}}else"document"in y&&"onreadystatechange"in y.document.createElement("script")?N=function(){var k=y.document.createElement("script");k.onreadystatechange=function(){B(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},y.document.documentElement.appendChild(k)}:N=function(){setTimeout(B,0)};var _,M=[];function B(){_=!0;for(var k,Z,F=M.length;F;){for(Z=M,M=[],k=-1;++k<F;)Z[k]();F=M.length}_=!1}b.exports=Q;function Q(k){M.push(k)===1&&!_&&N()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(m,b,T){"use strict";var y=m(1);function C(){}var N={},j=["REJECTED"],U=["FULFILLED"],H=["PENDING"];b.exports=v;function v(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=H,this.queue=[],this.outcome=void 0,h!==C&&Q(this,h)}v.prototype.catch=function(h){return this.then(null,h)},v.prototype.then=function(h,E){if(typeof h!="function"&&this.state===U||typeof E!="function"&&this.state===j)return this;var S=new this.constructor(C);if(this.state!==H){var R=this.state===U?h:E;M(S,R,this.outcome)}else this.queue.push(new _(S,h,E));return S};function _(h,E,S){this.promise=h,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}_.prototype.callFulfilled=function(h){N.resolve(this.promise,h)},_.prototype.otherCallFulfilled=function(h){M(this.promise,this.onFulfilled,h)},_.prototype.callRejected=function(h){N.reject(this.promise,h)},_.prototype.otherCallRejected=function(h){M(this.promise,this.onRejected,h)};function M(h,E,S){y(function(){var R;try{R=E(S)}catch(z){return N.reject(h,z)}R===h?N.reject(h,new TypeError("Cannot resolve promise with itself")):N.resolve(h,R)})}N.resolve=function(h,E){var S=k(B,E);if(S.status==="error")return N.reject(h,S.value);var R=S.value;if(R)Q(h,R);else{h.state=U,h.outcome=E;for(var z=-1,Y=h.queue.length;++z<Y;)h.queue[z].callFulfilled(E)}return h},N.reject=function(h,E){h.state=j,h.outcome=E;for(var S=-1,R=h.queue.length;++S<R;)h.queue[S].callRejected(E);return h};function B(h){var E=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof E=="function")return function(){E.apply(h,arguments)}}function Q(h,E){var S=!1;function R(G){S||(S=!0,N.reject(h,G))}function z(G){S||(S=!0,N.resolve(h,G))}function Y(){E(z,R)}var q=k(Y);q.status==="error"&&R(q.value)}function k(h,E){var S={};try{S.value=h(E),S.status="success"}catch(R){S.status="error",S.value=R}return S}v.resolve=Z;function Z(h){return h instanceof this?h:N.resolve(new this(C),h)}v.reject=F;function F(h){var E=new this(C);return N.reject(E,h)}v.all=Oe;function Oe(h){var E=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,R=!1;if(!S)return this.resolve([]);for(var z=new Array(S),Y=0,q=-1,G=new this(C);++q<S;)ee(h[q],q);return G;function ee(he,Ce){E.resolve(he).then(Pe,function(ce){R||(R=!0,N.reject(G,ce))});function Pe(ce){z[Ce]=ce,++Y===S&&!R&&(R=!0,N.resolve(G,z))}}}v.race=oe;function oe(h){var E=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,R=!1;if(!S)return this.resolve([]);for(var z=-1,Y=new this(C);++z<S;)q(h[z]);return Y;function q(G){E.resolve(G).then(function(ee){R||(R=!0,N.resolve(Y,ee))},function(ee){R||(R=!0,N.reject(Y,ee))})}}},{1:1}],3:[function(m,b,T){(function(y){"use strict";typeof y.Promise!="function"&&(y.Promise=m(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(m,b,T){"use strict";var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function C(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function N(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var j=N();function U(){try{if(!j||!j.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function H(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new t,i=0;i<e.length;i+=1)o.append(e[i]);return o.getBlob(n.type)}}typeof Promise>"u"&&m(3);var v=Promise;function _(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function M(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function B(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function Q(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",Z=void 0,F={},Oe=Object.prototype.toString,oe="readonly",h="readwrite";function E(e){for(var n=e.length,t=new ArrayBuffer(n),o=new Uint8Array(t),i=0;i<n;i++)o[i]=e.charCodeAt(i);return t}function S(e){return new v(function(n){var t=e.transaction(k,h),o=H([""]);t.objectStore(k).put(o,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),n(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);n(r||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function R(e){return typeof Z=="boolean"?v.resolve(Z):S(e).then(function(n){return Z=n,Z})}function z(e){var n=F[e.name],t={};t.promise=new v(function(o,i){t.resolve=o,t.reject=i}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function Y(e){var n=F[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function q(e,n){var t=F[e.name],o=t.deferredOperations.pop();if(o)return o.reject(n),o.promise}function G(e,n){return new v(function(t,o){if(F[e.name]=F[e.name]||ft(),e.db)if(n)z(e),e.db.close();else return t(e.db);var i=[e.name];n&&i.push(e.version);var r=j.open.apply(j,i);n&&(r.onupgradeneeded=function(a){var c=r.result;try{c.createObjectStore(e.storeName),a.oldVersion<=1&&c.createObjectStore(k)}catch(u){if(u.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+a.oldVersion+" to version "+a.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw u}}),r.onerror=function(a){a.preventDefault(),o(r.error)},r.onsuccess=function(){var a=r.result;a.onversionchange=function(c){c.target.close()},t(a),Y(e)}})}function ee(e){return G(e,!1)}function he(e){return G(e,!0)}function Ce(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;if(o&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function Pe(e){return new v(function(n,t){var o=new FileReader;o.onerror=t,o.onloadend=function(i){var r=btoa(i.target.result||"");n({__local_forage_encoded_blob:!0,data:r,type:e.type})},o.readAsBinaryString(e)})}function ce(e){var n=E(atob(e.data));return H([n],{type:e.type})}function ut(e){return e&&e.__local_forage_encoded_blob}function yn(e){var n=this,t=n._initReady().then(function(){var o=F[n._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return M(t,e,e),t}function _n(e){z(e);for(var n=F[e.name],t=n.forages,o=0;o<t.length;o++){var i=t[o];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,ee(e).then(function(r){return e.db=r,Ce(e)?he(e):r}).then(function(r){e.db=n.db=r;for(var a=0;a<t.length;a++)t[a]._dbInfo.db=r}).catch(function(r){throw q(e,r),r})}function te(e,n,t,o){o===void 0&&(o=1);try{var i=e.db.transaction(e.storeName,n);t(null,i)}catch(r){if(o>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return v.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),he(e)}).then(function(){return _n(e).then(function(){te(e,n,t,o-1)})}).catch(t);t(r)}}function ft(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function bn(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=e[o];var i=F[t.name];i||(i=ft(),F[t.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=yn);var r=[];function a(){return v.resolve()}for(var c=0;c<i.forages.length;c++){var u=i.forages[c];u!==n&&r.push(u._initReady().catch(a))}var l=i.forages.slice(0);return v.all(r).then(function(){return t.db=i.db,ee(t)}).then(function(d){return t.db=d,Ce(t,n._defaultConfig.version)?he(t):d}).then(function(d){t.db=i.db=d,n._dbInfo=t;for(var g=0;g<l.length;g++){var w=l[g];w!==n&&(w._dbInfo.db=t.db,w._dbInfo.version=t.version)}})}function wn(e,n){var t=this;e=B(e);var o=new v(function(i,r){t.ready().then(function(){te(t._dbInfo,oe,function(a,c){if(a)return r(a);try{var u=c.objectStore(t._dbInfo.storeName),l=u.get(e);l.onsuccess=function(){var d=l.result;d===void 0&&(d=null),ut(d)&&(d=ce(d)),i(d)},l.onerror=function(){r(l.error)}}catch(d){r(d)}})}).catch(r)});return _(o,n),o}function Sn(e,n){var t=this,o=new v(function(i,r){t.ready().then(function(){te(t._dbInfo,oe,function(a,c){if(a)return r(a);try{var u=c.objectStore(t._dbInfo.storeName),l=u.openCursor(),d=1;l.onsuccess=function(){var g=l.result;if(g){var w=g.value;ut(w)&&(w=ce(w));var I=e(w,g.key,d++);I!==void 0?i(I):g.continue()}else i()},l.onerror=function(){r(l.error)}}catch(g){r(g)}})}).catch(r)});return _(o,n),o}function Cn(e,n,t){var o=this;e=B(e);var i=new v(function(r,a){var c;o.ready().then(function(){return c=o._dbInfo,Oe.call(n)==="[object Blob]"?R(c.db).then(function(u){return u?n:Pe(n)}):n}).then(function(u){te(o._dbInfo,h,function(l,d){if(l)return a(l);try{var g=d.objectStore(o._dbInfo.storeName);u===null&&(u=void 0);var w=g.put(u,e);d.oncomplete=function(){u===void 0&&(u=null),r(u)},d.onabort=d.onerror=function(){var I=w.error?w.error:w.transaction.error;a(I)}}catch(I){a(I)}})}).catch(a)});return _(i,t),i}function En(e,n){var t=this;e=B(e);var o=new v(function(i,r){t.ready().then(function(){te(t._dbInfo,h,function(a,c){if(a)return r(a);try{var u=c.objectStore(t._dbInfo.storeName),l=u.delete(e);c.oncomplete=function(){i()},c.onerror=function(){r(l.error)},c.onabort=function(){var d=l.error?l.error:l.transaction.error;r(d)}}catch(d){r(d)}})}).catch(r)});return _(o,n),o}function In(e){var n=this,t=new v(function(o,i){n.ready().then(function(){te(n._dbInfo,h,function(r,a){if(r)return i(r);try{var c=a.objectStore(n._dbInfo.storeName),u=c.clear();a.oncomplete=function(){o()},a.onabort=a.onerror=function(){var l=u.error?u.error:u.transaction.error;i(l)}}catch(l){i(l)}})}).catch(i)});return _(t,e),t}function xn(e){var n=this,t=new v(function(o,i){n.ready().then(function(){te(n._dbInfo,oe,function(r,a){if(r)return i(r);try{var c=a.objectStore(n._dbInfo.storeName),u=c.count();u.onsuccess=function(){o(u.result)},u.onerror=function(){i(u.error)}}catch(l){i(l)}})}).catch(i)});return _(t,e),t}function Dn(e,n){var t=this,o=new v(function(i,r){if(e<0){i(null);return}t.ready().then(function(){te(t._dbInfo,oe,function(a,c){if(a)return r(a);try{var u=c.objectStore(t._dbInfo.storeName),l=!1,d=u.openKeyCursor();d.onsuccess=function(){var g=d.result;if(!g){i(null);return}e===0||l?i(g.key):(l=!0,g.advance(e))},d.onerror=function(){r(d.error)}}catch(g){r(g)}})}).catch(r)});return _(o,n),o}function Nn(e){var n=this,t=new v(function(o,i){n.ready().then(function(){te(n._dbInfo,oe,function(r,a){if(r)return i(r);try{var c=a.objectStore(n._dbInfo.storeName),u=c.openKeyCursor(),l=[];u.onsuccess=function(){var d=u.result;if(!d){o(l);return}l.push(d.key),d.continue()},u.onerror=function(){i(u.error)}}catch(d){i(d)}})}).catch(i)});return _(t,e),t}function Rn(e,n){n=Q.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;if(!e.name)i=v.reject("Invalid arguments");else{var r=e.name===t.name&&o._dbInfo.db,a=r?v.resolve(o._dbInfo.db):ee(e).then(function(c){var u=F[e.name],l=u.forages;u.db=c;for(var d=0;d<l.length;d++)l[d]._dbInfo.db=c;return c});e.storeName?i=a.then(function(c){if(c.objectStoreNames.contains(e.storeName)){var u=c.version+1;z(e);var l=F[e.name],d=l.forages;c.close();for(var g=0;g<d.length;g++){var w=d[g];w._dbInfo.db=null,w._dbInfo.version=u}var I=new v(function(x,L){var O=j.open(e.name,u);O.onerror=function(K){var pe=O.result;pe.close(),L(K)},O.onupgradeneeded=function(){var K=O.result;K.deleteObjectStore(e.storeName)},O.onsuccess=function(){var K=O.result;K.close(),x(K)}});return I.then(function(x){l.db=x;for(var L=0;L<d.length;L++){var O=d[L];O._dbInfo.db=x,Y(O._dbInfo)}}).catch(function(x){throw(q(e,x)||v.resolve()).catch(function(){}),x})}}):i=a.then(function(c){z(e);var u=F[e.name],l=u.forages;c.close();for(var d=0;d<l.length;d++){var g=l[d];g._dbInfo.db=null}var w=new v(function(I,x){var L=j.deleteDatabase(e.name);L.onerror=function(){var O=L.result;O&&O.close(),x(L.error)},L.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},L.onsuccess=function(){var O=L.result;O&&O.close(),I(O)}});return w.then(function(I){u.db=I;for(var x=0;x<l.length;x++){var L=l[x];Y(L._dbInfo)}}).catch(function(I){throw(q(e,I)||v.resolve()).catch(function(){}),I})})}return _(i,n),i}var Tn={_driver:"asyncStorage",_initStorage:bn,_support:U(),iterate:Sn,getItem:wn,setItem:Cn,removeItem:En,clear:In,length:xn,key:Dn,keys:Nn,dropInstance:Rn};function An(){return typeof openDatabase=="function"}var ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",On="~~local_forage_type~",lt=/^~~local_forage_type~([^~]+)~/,Ee="__lfsc__:",Me=Ee.length,Le="arbf",Be="blob",dt="si08",mt="ui08",ht="uic8",vt="si16",pt="si32",gt="ur16",yt="ui32",_t="fl32",bt="fl64",wt=Me+Le.length,St=Object.prototype.toString;function Ct(e){var n=e.length*.75,t=e.length,o,i=0,r,a,c,u;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var l=new ArrayBuffer(n),d=new Uint8Array(l);for(o=0;o<t;o+=4)r=ne.indexOf(e[o]),a=ne.indexOf(e[o+1]),c=ne.indexOf(e[o+2]),u=ne.indexOf(e[o+3]),d[i++]=r<<2|a>>4,d[i++]=(a&15)<<4|c>>2,d[i++]=(c&3)<<6|u&63;return l}function ke(e){var n=new Uint8Array(e),t="",o;for(o=0;o<n.length;o+=3)t+=ne[n[o]>>2],t+=ne[(n[o]&3)<<4|n[o+1]>>4],t+=ne[(n[o+1]&15)<<2|n[o+2]>>6],t+=ne[n[o+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Pn(e,n){var t="";if(e&&(t=St.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&St.call(e.buffer)==="[object ArrayBuffer]")){var o,i=Ee;e instanceof ArrayBuffer?(o=e,i+=Le):(o=e.buffer,t==="[object Int8Array]"?i+=dt:t==="[object Uint8Array]"?i+=mt:t==="[object Uint8ClampedArray]"?i+=ht:t==="[object Int16Array]"?i+=vt:t==="[object Uint16Array]"?i+=gt:t==="[object Int32Array]"?i+=pt:t==="[object Uint32Array]"?i+=yt:t==="[object Float32Array]"?i+=_t:t==="[object Float64Array]"?i+=bt:n(new Error("Failed to get type for BinaryArray"))),n(i+ke(o))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var a=On+e.type+"~"+ke(this.result);n(Ee+Be+a)},r.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),n(null,a)}}function Mn(e){if(e.substring(0,Me)!==Ee)return JSON.parse(e);var n=e.substring(wt),t=e.substring(Me,wt),o;if(t===Be&&lt.test(n)){var i=n.match(lt);o=i[1],n=n.substring(i[0].length)}var r=Ct(n);switch(t){case Le:return r;case Be:return H([r],{type:o});case dt:return new Int8Array(r);case mt:return new Uint8Array(r);case ht:return new Uint8ClampedArray(r);case vt:return new Int16Array(r);case gt:return new Uint16Array(r);case pt:return new Int32Array(r);case yt:return new Uint32Array(r);case _t:return new Float32Array(r);case bt:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var Fe={serialize:Pn,deserialize:Mn,stringToBuffer:Ct,bufferToString:ke};function Et(e,n,t,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,o)}function Ln(e){var n=this,t={db:null};if(e)for(var o in e)t[o]=typeof e[o]!="string"?e[o].toString():e[o];var i=new v(function(r,a){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(c){return a(c)}t.db.transaction(function(c){Et(c,t,function(){n._dbInfo=t,r()},function(u,l){a(l)})},a)});return t.serializer=Fe,i}function re(e,n,t,o,i,r){e.executeSql(t,o,i,function(a,c){c.code===c.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(u,l){l.rows.length?r(u,c):Et(u,n,function(){u.executeSql(t,o,i,r)},r)},r):r(a,c)},r)}function Bn(e,n){var t=this;e=B(e);var o=new v(function(i,r){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(c){re(c,a,"SELECT * FROM "+a.storeName+" WHERE key = ? LIMIT 1",[e],function(u,l){var d=l.rows.length?l.rows.item(0).value:null;d&&(d=a.serializer.deserialize(d)),i(d)},function(u,l){r(l)})})}).catch(r)});return _(o,n),o}function kn(e,n){var t=this,o=new v(function(i,r){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(c){re(c,a,"SELECT * FROM "+a.storeName,[],function(u,l){for(var d=l.rows,g=d.length,w=0;w<g;w++){var I=d.item(w),x=I.value;if(x&&(x=a.serializer.deserialize(x)),x=e(x,I.key,w+1),x!==void 0){i(x);return}}i()},function(u,l){r(l)})})}).catch(r)});return _(o,n),o}function It(e,n,t,o){var i=this;e=B(e);var r=new v(function(a,c){i.ready().then(function(){n===void 0&&(n=null);var u=n,l=i._dbInfo;l.serializer.serialize(n,function(d,g){g?c(g):l.db.transaction(function(w){re(w,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,d],function(){a(u)},function(I,x){c(x)})},function(w){if(w.code===w.QUOTA_ERR){if(o>0){a(It.apply(i,[e,u,t,o-1]));return}c(w)}})})}).catch(c)});return _(r,t),r}function Fn(e,n,t){return It.apply(this,[e,n,t,1])}function Un(e,n){var t=this;e=B(e);var o=new v(function(i,r){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(c){re(c,a,"DELETE FROM "+a.storeName+" WHERE key = ?",[e],function(){i()},function(u,l){r(l)})})}).catch(r)});return _(o,n),o}function zn(e){var n=this,t=new v(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(a){re(a,r,"DELETE FROM "+r.storeName,[],function(){o()},function(c,u){i(u)})})}).catch(i)});return _(t,e),t}function jn(e){var n=this,t=new v(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(a){re(a,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(c,u){var l=u.rows.item(0).c;o(l)},function(c,u){i(u)})})}).catch(i)});return _(t,e),t}function $n(e,n){var t=this,o=new v(function(i,r){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(c){re(c,a,"SELECT key FROM "+a.storeName+" WHERE id = ? LIMIT 1",[e+1],function(u,l){var d=l.rows.length?l.rows.item(0).key:null;i(d)},function(u,l){r(l)})})}).catch(r)});return _(o,n),o}function Wn(e){var n=this,t=new v(function(o,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(a){re(a,r,"SELECT key FROM "+r.storeName,[],function(c,u){for(var l=[],d=0;d<u.rows.length;d++)l.push(u.rows.item(d).key);o(l)},function(c,u){i(u)})})}).catch(i)});return _(t,e),t}function Yn(e){return new v(function(n,t){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,r){for(var a=[],c=0;c<r.rows.length;c++)a.push(r.rows.item(c).name);n({db:e,storeNames:a})},function(i,r){t(r)})},function(o){t(o)})})}function Vn(e,n){n=Q.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var o=this,i;return e.name?i=new v(function(r){var a;e.name===t.name?a=o._dbInfo.db:a=openDatabase(e.name,"","",0),e.storeName?r({db:a,storeNames:[e.storeName]}):r(Yn(a))}).then(function(r){return new v(function(a,c){r.db.transaction(function(u){function l(I){return new v(function(x,L){u.executeSql("DROP TABLE IF EXISTS "+I,[],function(){x()},function(O,K){L(K)})})}for(var d=[],g=0,w=r.storeNames.length;g<w;g++)d.push(l(r.storeNames[g]));v.all(d).then(function(){a()}).catch(function(I){c(I)})},function(u){c(u)})})}):i=v.reject("Invalid arguments"),_(i,n),i}var qn={_driver:"webSQLStorage",_initStorage:Ln,_support:An(),iterate:kn,getItem:Bn,setItem:Fn,removeItem:Un,clear:zn,length:jn,key:$n,keys:Wn,dropInstance:Vn};function Gn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function xt(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function Kn(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function Hn(){return!Kn()||localStorage.length>0}function Qn(e){var n=this,t={};if(e)for(var o in e)t[o]=e[o];return t.keyPrefix=xt(e,n._defaultConfig),Hn()?(n._dbInfo=t,t.serializer=Fe,v.resolve()):v.reject()}function Xn(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var r=localStorage.key(i);r.indexOf(o)===0&&localStorage.removeItem(r)}});return _(t,e),t}function Jn(e,n){var t=this;e=B(e);var o=t.ready().then(function(){var i=t._dbInfo,r=localStorage.getItem(i.keyPrefix+e);return r&&(r=i.serializer.deserialize(r)),r});return _(o,n),o}function Zn(e,n){var t=this,o=t.ready().then(function(){for(var i=t._dbInfo,r=i.keyPrefix,a=r.length,c=localStorage.length,u=1,l=0;l<c;l++){var d=localStorage.key(l);if(d.indexOf(r)===0){var g=localStorage.getItem(d);if(g&&(g=i.serializer.deserialize(g)),g=e(g,d.substring(a),u++),g!==void 0)return g}}});return _(o,n),o}function er(e,n){var t=this,o=t.ready().then(function(){var i=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(i.keyPrefix.length)),r});return _(o,n),o}function tr(e){var n=this,t=n.ready().then(function(){for(var o=n._dbInfo,i=localStorage.length,r=[],a=0;a<i;a++){var c=localStorage.key(a);c.indexOf(o.keyPrefix)===0&&r.push(c.substring(o.keyPrefix.length))}return r});return _(t,e),t}function nr(e){var n=this,t=n.keys().then(function(o){return o.length});return _(t,e),t}function rr(e,n){var t=this;e=B(e);var o=t.ready().then(function(){var i=t._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return _(o,n),o}function or(e,n,t){var o=this;e=B(e);var i=o.ready().then(function(){n===void 0&&(n=null);var r=n;return new v(function(a,c){var u=o._dbInfo;u.serializer.serialize(n,function(l,d){if(d)c(d);else try{localStorage.setItem(u.keyPrefix+e,l),a(r)}catch(g){(g.name==="QuotaExceededError"||g.name==="NS_ERROR_DOM_QUOTA_REACHED")&&c(g),c(g)}})})});return _(i,t),i}function ir(e,n){if(n=Q.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var o=this,i;return e.name?i=new v(function(r){e.storeName?r(xt(e,o._defaultConfig)):r(e.name+"/")}).then(function(r){for(var a=localStorage.length-1;a>=0;a--){var c=localStorage.key(a);c.indexOf(r)===0&&localStorage.removeItem(c)}}):i=v.reject("Invalid arguments"),_(i,n),i}var ar={_driver:"localStorageWrapper",_initStorage:Qn,_support:Gn(),iterate:Zn,getItem:Jn,setItem:or,removeItem:rr,clear:Xn,length:nr,key:er,keys:tr,dropInstance:ir},sr=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},cr=function(n,t){for(var o=n.length,i=0;i<o;){if(sr(n[i],t))return!0;i++}return!1},Dt=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},ve={},Nt={},ue={INDEXEDDB:Tn,WEBSQL:qn,LOCALSTORAGE:ar},ur=[ue.INDEXEDDB._driver,ue.WEBSQL._driver,ue.LOCALSTORAGE._driver],Ie=["dropInstance"],Ue=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ie),fr={description:"",driver:ur.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function lr(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function ze(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(Dt(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var dr=function(){function e(n){C(this,e);for(var t in ue)if(ue.hasOwnProperty(t)){var o=ue[t],i=o._driver;this[t]=i,ve[i]||this.defineDriver(o)}this._defaultConfig=ze({},fr),this._config=ze({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":y(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in t){if(o==="storeName"&&(t[o]=t[o].replace(/\W/g,"_")),o==="version"&&typeof t[o]!="number")return new Error("Database version must be a number.");this._config[o]=t[o]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,o,i){var r=new v(function(a,c){try{var u=t._driver,l=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){c(l);return}for(var d=Ue.concat("_initStorage"),g=0,w=d.length;g<w;g++){var I=d[g],x=!cr(Ie,I);if((x||t[I])&&typeof t[I]!="function"){c(l);return}}var L=function(){for(var pe=function(vr){return function(){var pr=new Error("Method "+vr+" is not implemented by the current driver"),Rt=v.reject(pr);return _(Rt,arguments[arguments.length-1]),Rt}},je=0,hr=Ie.length;je<hr;je++){var $e=Ie[je];t[$e]||(t[$e]=pe($e))}};L();var O=function(pe){ve[u]&&console.info("Redefining LocalForage driver: "+u),ve[u]=t,Nt[u]=pe,a()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(O,c):O(!!t._support):O(!0)}catch(K){c(K)}});return M(r,o,i),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,o,i){var r=ve[t]?v.resolve(ve[t]):v.reject(new Error("Driver not found."));return M(r,o,i),r},e.prototype.getSerializer=function(t){var o=v.resolve(Fe);return M(o,t),o},e.prototype.ready=function(t){var o=this,i=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return M(i,t,t),i},e.prototype.setDriver=function(t,o,i){var r=this;Dt(t)||(t=[t]);var a=this._getSupportedDrivers(t);function c(){r._config.driver=r.driver()}function u(g){return r._extend(g),c(),r._ready=r._initStorage(r._config),r._ready}function l(g){return function(){var w=0;function I(){for(;w<g.length;){var x=g[w];return w++,r._dbInfo=null,r._ready=null,r.getDriver(x).then(u).catch(I)}c();var L=new Error("No available storage method found.");return r._driverSet=v.reject(L),r._driverSet}return I()}}var d=this._driverSet!==null?this._driverSet.catch(function(){return v.resolve()}):v.resolve();return this._driverSet=d.then(function(){var g=a[0];return r._dbInfo=null,r._ready=null,r.getDriver(g).then(function(w){r._driver=w._driver,c(),r._wrapLibraryMethodsWithReady(),r._initDriver=l(a)})}).catch(function(){c();var g=new Error("No available storage method found.");return r._driverSet=v.reject(g),r._driverSet}),M(this._driverSet,o,i),this._driverSet},e.prototype.supports=function(t){return!!Nt[t]},e.prototype._extend=function(t){ze(this,t)},e.prototype._getSupportedDrivers=function(t){for(var o=[],i=0,r=t.length;i<r;i++){var a=t[i];this.supports(a)&&o.push(a)}return o},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,o=Ue.length;t<o;t++)lr(this,Ue[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),mr=new dr;b.exports=mr},{3:3}]},{},[4])(4)})});var Se=yr(mn()),Te={SecureStorage:"ionicSecureStorage",IndexedDB:Se.default.INDEXEDDB,LocalStorage:Se.default.LOCALSTORAGE},hn={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[Te.SecureStorage,Te.IndexedDB,Te.LocalStorage]},X=class{constructor(p=hn){this._db=null,this._secureStorageDriver=null;let f=Object.assign({},hn,p||{});this._config=f}async create(){let p=Se.default.createInstance(this._config);return this._db=p,await p.setDriver(this._config.driverOrder||[]),this}async defineDriver(p){return p._driver===Te.SecureStorage&&(this._secureStorageDriver=p),Se.default.defineDriver(p)}get driver(){var p;return((p=this._db)===null||p===void 0?void 0:p.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(p){return this.assertDb().getItem(p)}set(p,f){return this.assertDb().setItem(p,f)}remove(p){return this.assertDb().removeItem(p)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(p){return this.assertDb().iterate(p)}setEncryptionKey(p){var f;if(this._secureStorageDriver)(f=this._secureStorageDriver)===null||f===void 0||f.setEncryptionKey(p);else throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}};var vn=new Pt("STORAGE_CONFIG_TOKEN"),st=class extends X{constructor(){super()}async create(){return this}async defineDriver(){}get driver(){return"noop"}async get(p){return null}async set(p,f){}async remove(p){}async clear(){}async length(){return 0}async keys(){return[]}async forEach(p){}setEncryptionKey(p){}};function br(s,p){return Ft(s)?new st:new X(p)}var Br=(()=>{class s{static forRoot(f=null){return{ngModule:s,providers:[{provide:vn,useValue:f},{provide:X,useFactory:br,deps:[Bt,vn]}]}}}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=Mt({type:s}),s.\u0275inj=Ot({}),s})();var se=class extends Error{};se.prototype.name="InvalidTokenError";function wr(s){return decodeURIComponent(atob(s).replace(/(.)/g,(p,f)=>{let m=f.charCodeAt(0).toString(16).toUpperCase();return m.length<2&&(m="0"+m),"%"+m}))}function Sr(s){let p=s.replace(/-/g,"+").replace(/_/g,"/");switch(p.length%4){case 0:break;case 2:p+="==";break;case 3:p+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return wr(p)}catch{return atob(p)}}function pn(s,p){if(typeof s!="string")throw new se("Invalid token specified: must be a string");p||(p={});let f=p.header===!0?0:1,m=s.split(".")[f];if(typeof m!="string")throw new se(`Invalid token specified: missing part #${f+1}`);let b;try{b=Sr(m)}catch(T){throw new se(`Invalid token specified: invalid base64 for part #${f+1} (${T.message})`)}try{return JSON.parse(b)}catch(T){throw new se(`Invalid token specified: invalid json for part #${f+1} (${T.message})`)}}var Ae=(()=>{class s{constructor(){this._storageInitialised=!1,this._storage=A(X)}async startSession(f){this._storageInitialised||await this._storage.create(),f.access_token&&f.refresh_token&&(this._storage?.set("access_token",f.access_token),this._storage?.set("refresh_token",f.refresh_token))}async getSession(){return this._storageInitialised||await this._storage.create(),{access_token:await this._storage?.get("access_token"),refresh_token:await this._storage?.get("refresh_token")}}async get(f){return this._storageInitialised||await this._storage.create(),await this._storage.get(f)}async set(f,m){return this._storageInitialised||await this._storage.create(),this._storage.set(f,m)}async remove(f){return this._storageInitialised||await this._storage.create(),this._storage.remove(f)}async endSession(){await this._storage.clear()}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275prov=ie({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),gn=(()=>{class s{constructor(){this.apiKeyCloakUrl="http://192.168.1.38:8080",this._httpClient=A(Ut),this.storage=A(X)}login(f,m){let b=new Qe().set("grant_type","password").set("client_id","clovis-public-client").set("scope","email openid").set("username",f).set("password",m),T=new He({"Content-Type":"application/x-www-form-urlencoded"});return this._httpClient.post(`${this.apiKeyCloakUrl}/realms/clovis/protocol/openid-connect/token/`,b.toString(),{headers:T}).pipe(qe(1))}refreshToken(){return We(this.storage.get("refresh_token")).pipe(xe(f=>{let m=new Qe().set("grant_type","refresh_token").set("client_id","clovis-public-client").set("refresh_token",f),b=new He().set("Content-Type","application/x-www-form-urlencoded");return this._httpClient.post(`${this.apiKeyCloakUrl}/realms/clovis/protocol/openid-connect/token/`,m,{headers:b}).pipe(qe(1))}))}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275prov=ie({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),Cr=(()=>{class s{constructor(){this.resetCodeSubject=new Tt(null),this.resetCode$=this.resetCodeSubject.asObservable()}sendResetCode(f){let m=this.generateResetCode();return console.log(`Sending reset code ${m} to ${f}`),this.resetCodeSubject.next(m),fe(`Reset code sent to ${f}: ${m}`).pipe(le(1e3))}generateResetCode(){return Math.floor(1e5+Math.random()*9e5).toString()}verifyResetCode(f){let m=this.resetCodeSubject.value;return m&&f===m?(console.log("Reset code is valid"),fe("Reset code is valid").pipe(le(500))):(console.log("Invalid reset code"),fe("Invalid reset code. Please try again.").pipe(le(500)))}updatePassword(f){return this.resetCodeSubject.value?(console.log(`Password updated to: ${f}`),this.resetCodeSubject.next(null),fe("Password updated successfully").pipe(le(500))):(console.log("No valid reset code found"),fe("Failed to update password. Invalid reset code.").pipe(le(500)))}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275prov=ie({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),Er=(()=>{class s{constructor(){this._toastController=A(un),ln({checkmarkCircleOutline:it,alertCircleOutline:Re})}async presentToastWithOptions(f,m,b){await(await this._toastController.create({message:f,duration:2500,position:"bottom",icon:m,color:b})).present()}success(f){this.presentToastWithOptions(f,it,"primary")}warning(f){this.presentToastWithOptions(f,Re,"warning")}error(f){this.presentToastWithOptions(f,Re,"danger")}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275prov=ie({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),Ir={token:null,isLoading:!1,isAuthenticated:!1,steps:1},xr=$t({providedIn:"root"},qt(Ir),Wt(s=>({isLogged:Ke(()=>s.isAuthenticated()),isNotLogged:Ke(()=>!s.token()||!s.isAuthenticated())})),Vt((s,p=A(gn),f=A(Cr),m=A(Ae),b=A(Jt),T=A(Er))=>({localLogin(y){y.access_token&&y.refresh_token&&W(s,{isAuthenticated:!0,token:{access_token:y.access_token,expires_in:0,refresh_expires_in:0,refresh_token:y.refresh_token}})},logIn:be(ye(de(()=>W(s,{isLoading:!0})),_e(y=>p.login(y.login,y.password).pipe(At(C=>({access_token:C.access_token,expires_in:C.expires_in,refresh_expires_in:C.refresh_expires_in,refresh_token:C.refresh_token})),de(C=>m.startSession({access_token:C.access_token,refresh_token:C.refresh_token})),we({next:C=>{W(s,{isLoading:!1,isAuthenticated:!0,token:C}),T.success("Bienvenue sur votre espace personnel.")},error:()=>{W(s,{isLoading:!1}),T.error("\xC9chec de l'authentification. Veuillez v\xE9rifier vos identifiants.")}}))))),sendResetCode:be(ye(de(()=>W(s,{isLoading:!0})),_e(y=>f.sendResetCode(y).pipe(we({next:C=>{W(s,{isLoading:!1,steps:2})},error:()=>{W(s,{isLoading:!1,steps:2})}}))))),verifyResetCode:be(ye(de(()=>W(s,{isLoading:!0})),_e(y=>f.verifyResetCode(y).pipe(we({next:C=>{W(s,{isLoading:!1,steps:3})},error:()=>{W(s,{isLoading:!1})}}))))),updatePassword:be(ye(de(()=>W(s,{isLoading:!0})),_e(y=>f.updatePassword(y).pipe(we({next:C=>{W(s,{isLoading:!1,steps:3})},error:()=>{W(s,{isLoading:!1})}}))))),logout:async()=>{W(s,{token:null,isLoading:!1,isAuthenticated:!1}),m.endSession().then(()=>{b.navigateRoot("authenticate/login",{animated:!1})})}})),Yt({onInit(s,p=A(Ae)){kt(()=>{let f=jt(s);console.info("counter state: ",f)}),p.getSession().then(f=>{f&&s.localLogin(f)})}})),ct=(()=>{class s{constructor(){this.store=A(xr),this.router=A(Xe)}login(f,m){this.store.logIn({login:f,password:m})}logout(){this.store.logout()}get isLoading(){return this.store.isLoading}get isAuthenticated(){return this.store.isLogged}get token(){return this.store.token}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275prov=ie({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),oo=(s,p,f=A(ct),m=A(Xe))=>(f.isAuthenticated()||m.navigate(["authenticate/login"]),f.isAuthenticated()),Dr=(()=>{class s{constructor(){this.application=A(ct),this.loginForm=A(rt).group({email:new et("",[J.required,J.email]),password:new et("",J.required)})}save(){this.loginForm.value.email&&this.loginForm.value.password&&this.application.login(this.loginForm.value.email,this.loginForm.value.password)}get email(){return this.loginForm.controls.email}get password(){return this.loginForm.controls.password}get isValid(){return this.loginForm.valid}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275cmp=De({type:s,selectors:[["clovis-login-with-form"]],standalone:!0,features:[Ne],decls:11,vars:4,consts:[[3,"submit","formGroup"],["fill","solid","label","Email","labelPlacement","floating",3,"formControl"],["fill","solid","label","Mot de passe","labelPlacement","floating","type","password",3,"formControl"],[1,"ion-text-center","ion-margin-top"],["routerLink","/authenticate/forgot-password"],["type","submit","expand","block",1,"clovis",3,"disabled"]],template:function(m,b){m&1&&(D(0,"form",0),Ge("submit",function(){return b.save()}),D(1,"ion-list")(2,"ion-item"),V(3,"ion-input",1),P(),D(4,"ion-item"),V(5,"ion-input",2),P(),D(6,"div",3)(7,"a",4),$(8,"mot de passe oubli\xE9"),P()()(),D(9,"ion-button",5),$(10,"Valider"),P()()),m&2&&(ae("formGroup",b.loginForm),me(3),ae("formControl",b.email),me(2),ae("formControl",b.password),me(4),ae("disabled",!b.isValid))},dependencies:[ot,tt,Je,Ze,Ht,nt,zt,rn,nn,fn,Zt],styles:["ion-list[_ngcontent-%COMP%]{margin-bottom:12vh}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-family:SofiaPro,sans-serif;font-weight:500;--color: #54565c}ion-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:SofiaPro,sans-serif;font-weight:500;text-decoration:none}"]})}}return s})(),Nr=(()=>{class s{static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275cmp=De({type:s,selectors:[["clovis-login"]],standalone:!0,features:[Ne],decls:14,vars:0,consts:[["collapse","fade"],[1,"ion-justify-content-center","ion-align-items-center","ion-text-center"],["alt","Enveloppe","src","https://res.cloudinary.com/dyewhr2lj/image/upload/v1668516112/Logo_Clovis_fxqyoh.png"],[1,"ion-padding"],[1,"ion-text-center","ion-margin"]],template:function(m,b){m&1&&(D(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-row",1)(3,"ion-thumbnail"),V(4,"img",2),P(),D(5,"p"),$(6,"clovis"),P()()()(),D(7,"ion-content",3)(8,"ion-text",4)(9,"h3"),$(10,"Bienvenue chez Clovis !"),P(),D(11,"p"),$(12,"Saisissez vos identifiants pour acc\xE9der \xE0 votre espace"),P()(),V(13,"clovis-login-with-form"),P())},dependencies:[tn,cn,on,an,en,Dr,sn],styles:["ion-header[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 32px}ion-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:SofiaPro,sans-serif;font-weight:600;font-size:1.1em}ion-text[_ngcontent-%COMP%]{font-family:SofiaPro,sans-serif}ion-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600}ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300}"]})}}return s})(),io=[{path:"login",component:Nr},{path:"forgot-password",loadComponent:()=>import("./chunk-RWDKY7NQ.js").then(s=>s.ForgotPasswordComponent)},{path:"**",redirectTo:"/login"}];function ao(s,p){let f=A(X);return We(f.get("access_token")).pipe(xe(m=>{let b=s.clone({setHeaders:{Authorization:"Bearer "+m}});return p(b)}))}var so=(s,p)=>{let f=A(gn),m=A(Ae),b=A(ct);return p(s).pipe(Ve(T=>T.status===401||T.status===0?f.refreshToken().pipe(xe(y=>{m.startSession({access_token:y.access_token,refresh_token:y.refresh_token});let C=s.clone({headers:s.headers.set("Authorization",`Bearer ${y.access_token}`)});return console.error("Error refreshing token update"),p(C)}),Ve(y=>(console.error("Un erreur est survenu",y),b.logout(),Ye(()=>new Error("Token refresh failed!"))))):Ye(()=>T)))},co=(()=>{class s{constructor(){this.registerForm=A(rt).group({firstName:[null,[J.required]],lastName:[null,[J.required]],email:["",[J.required]],phoneNumber:["",[J.required]],zipCode:["",[J.required]],rgpdChecked:[!1,J.requiredTrue]}),this.requestToSave=Lt()}saveToParent(){let f=this.registerForm.value;this.requestToSave.emit(f),console.info(f)}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275cmp=De({type:s,selectors:[["clovis-inscription-form"]],outputs:{requestToSave:"requestToSave"},standalone:!0,features:[Ne],decls:39,vars:2,consts:[[1,"form-container"],[1,"form-register",3,"ngSubmit","formGroup"],[1,"form-item"],["type","text","id","firstName","name","firstName","formControlName","firstName","required",""],["for","firstName"],["name","lastName","id","lastName","formControlName","lastName","required",""],["for","lastName"],["name","email","id","email","formControlName","email","required",""],["for","email"],["name","phoneNumber","id","phoneNumber","formControlName","phoneNumber","required",""],["for","phoneNumber"],["name","zipCode","id","zipCode","formControlName","zipCode","required",""],["for","zipCode"],[1,"form-check"],["type","checkbox","formControlName","rgpdChecked",1,"checkbox"],["for","acceptTerms",1,"form-check-label"],[1,"images-trust"],["src","https://res.cloudinary.com/dyewhr2lj/image/upload/v1615905954/Signature%20Email/trust_credential_bldu39.png","alt","TRUST"],[1,"images-rgpd"],["src","https://res.cloudinary.com/dyewhr2lj/image/upload/v1720877304/Ic%C3%B4nes%20et%20illustrations/icons%20survey/CNIL.jpg","alt","CNIL"],["src","https://res.cloudinary.com/dyewhr2lj/image/upload/v1720877304/Ic%C3%B4nes%20et%20illustrations/icons%20survey/RGPD.png","alt","RGPD"],[1,"terms"],[1,"button"],["type","submit",1,"clovis-big-blue-button",3,"disabled"]],template:function(m,b){m&1&&(D(0,"div",0)(1,"form",1),Ge("ngSubmit",function(){return b.saveToParent()}),D(2,"div",2),V(3,"input",3),D(4,"label",4),$(5,"Username"),P()(),D(6,"div",2),V(7,"input",5),D(8,"label",6),$(9,"Last Name"),P()(),D(10,"div",2),V(11,"input",7),D(12,"label",8),$(13,"Email"),P()(),D(14,"div",2),V(15,"input",9),D(16,"label",10),$(17,"Phone Number"),P()(),D(18,"div",2),V(19,"input",11),D(20,"label",12),$(21,"Zip Code"),P()(),D(22,"div",13),V(23,"input",14),D(24,"label",15),$(25,"J\u2019accepte que CARE SAS collecte mes donn\xE9es personnelles aux fins de pouvoir me contacter (par email et t\xE9l\xE9phone) pour m\u2019aider \xE0 optimiser ma situation fiscale et financi\xE8re."),P()(),D(26,"div",16),V(27,"img",17),P(),D(28,"div",18),V(29,"img",19)(30,"img",20),P(),D(31,"div",21)(32,"p"),$(33,"Nous respectons la confidentialit\xE9 et la s\xE9curit\xE9 de vos donn\xE9es"),P(),D(34,"p"),$(35,"En cliquant sur \xAB\xA0Acc\xE9der \xE0 mon r\xE9sultat\xA0\xBB, je reconnais avoir pris connaissance et accept\xE9 les conditions g\xE9n\xE9rales. Les donn\xE9es personnelles communiqu\xE9es sont uniquement utilis\xE9es pour permettre l\u2019utilisation des services Clovis. Pour plus d\u2019informations, consultez notre charte de confidentialit\xE9."),P()(),D(36,"div",22)(37,"button",23),$(38,"Submit"),P()()()()),m&2&&(me(),ae("formGroup",b.registerForm),me(36),ae("disabled",!b.registerForm.valid))},dependencies:[ot,tt,Kt,Gt,Je,Ze,Xt,nt,Qt],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.form-register[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:1em}.form-item[_ngcontent-%COMP%]{position:relative;margin-bottom:.8em}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:25em;height:2.5em;background:transparent;border:solid .1em #ccc;transition:all .3s ease;padding:0 1em}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4b61fc}.form-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;cursor:text;z-index:2;top:.8em;left:.8em;font-size:.75em;font-weight:700;background:#fff;padding:0 .6em;color:#999;transition:all .3s ease}.form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid + label[_ngcontent-%COMP%]{font-size:.7em;top:-.3em}.form-check[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;text-align:center;font-size:12px;font-weight:500;line-height:1.22;color:#182a4e}.checkbox[_ngcontent-%COMP%]{width:1.5em;height:1.5em;display:flex;align-items:center}.images-rgpd[_ngcontent-%COMP%]{display:flex;margin:.5em;flex-wrap:wrap;justify-content:center}.images-rgpd[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:solid 2px #f8f8f8;border-radius:50%;box-shadow:0 0 5px .5px #00000052;width:16%;margin:.2em}.images-rgpd[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50%}.images-trust[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:.5em}.images-trust[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}.terms[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;width:50%}.terms[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:6px;color:#ababab}.button[_ngcontent-%COMP%]{width:80%}"]})}}return s})(),uo=(()=>{class s{constructor(){this.storage=A(Ae)}async decodeToken(){let f=await this.storage.get("access_token");return pn(f).realm_access?.roles||null}static{this.\u0275fac=function(m){return new(m||s)}}static{this.\u0275prov=ie({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{Br as a,xr as b,ct as c,oo as d,io as e,ao as f,so as g,co as h,uo as i};
