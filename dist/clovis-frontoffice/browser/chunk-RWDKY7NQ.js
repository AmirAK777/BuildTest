import{b as z}from"./chunk-FTRN2MMF.js";import"./chunk-FWA4ZV65.js";import{$ as w,$a as F,E as x,Eb as N,Fb as O,J as h,Mb as q,O as p,P as f,Ub as B,Vb as G,Xa as l,Xb as L,Y as s,Ya as S,Za as b,aa as m,ba as v,bb as E,cc as R,db as y,fb as M,ga as t,gb as V,ha as i,ia as c,ja as g,ka as C,la as d,qb as I,ra as a,va as P,zb as T}from"./chunk-J4QSXUO7.js";import"./chunk-GCD5ODGY.js";import"./chunk-7N27NNS6.js";import"./chunk-NUA2LQHF.js";import"./chunk-FXHXDGTP.js";import"./chunk-G3CV3VGG.js";import"./chunk-OOOHFHRH.js";import"./chunk-XDG22ATE.js";import"./chunk-H5GYM6DM.js";import"./chunk-4WFVMWDK.js";import"./chunk-52SVZWMH.js";import"./chunk-NMYJD6OP.js";import"./chunk-B43CU5JX.js";import"./chunk-TQEIIVVC.js";import"./chunk-LF5XB4YN.js";import"./chunk-KZZABCGY.js";function j(o,u){if(o&1){let e=g();t(0,"ion-text",4)(1,"h3"),a(2,"R\xE9initialisation de votre mot de passe"),i(),t(3,"p"),a(4,"Nous vous enverrons un code de v\xE9rification \xE0 votre adresse email"),i()(),t(5,"form",5),C("ngSubmit",function(){p(e);let n=d();return f(n.sendVerificationCode())}),t(6,"ion-item"),c(7,"ion-input",6),i(),t(8,"ion-button",7),a(9,"Envoyer le code de v\xE9rification"),i()()}if(o&2){let e=d();s(5),m("formGroup",e.emailForm),s(3),m("disabled",e.emailForm.invalid)}}function D(o,u){if(o&1){let e=g();t(0,"ion-text",4)(1,"h3"),a(2,"Saisissez le code \xE0 6 chiffres que vous avec re\xE7u par email"),i()(),t(3,"form",5),C("ngSubmit",function(){p(e);let n=d();return f(n.verifyCode())}),t(4,"ion-item"),c(5,"ion-input",8),i(),t(6,"ion-button",7),a(7,"Valider"),i()()}if(o&2){let e=d();s(3),m("formGroup",e.codeForm),s(3),m("disabled",e.codeForm.invalid)}}function k(o,u){if(o&1){let e=g();t(0,"ion-text",4)(1,"h3"),a(2,"Parfait ! Saisissez votre nouveau mot de passe"),i()(),t(3,"form",5),C("ngSubmit",function(){p(e);let n=d();return f(n.updatePassword())}),t(4,"ion-item"),c(5,"ion-input",9),i(),t(6,"ion-item"),c(7,"ion-input",10),i(),t(8,"ion-button",7),a(9,"Valider"),i()()}if(o&2){let e=d();s(3),m("formGroup",e.updatePasswordForm),s(5),m("disabled",e.updatePasswordForm.invalid)}}function A(o,u){return e=>{let r=e.get(o),n=e.get(u);return!r||!n||n.errors&&!n.errors.mustMatch||(r.value!==n.value?n.setErrors({mustMatch:!0}):n.setErrors(null)),null}}var $=(()=>{class o{constructor(){this.store=x(z),this.formBuilder=x(M),this.steps=this.store.steps,this.emailForm=this.formBuilder.group({email:["",[l.required,l.email]]}),this.codeForm=this.formBuilder.group({code:["",[l.required,l.minLength(6)]]}),this.updatePasswordForm=this.formBuilder.group({newPassword:["",[l.required,l.minLength(8)]],confirmPassword:["",[l.required]]},{validators:[A("newPassword","confirmPassword")]})}sendVerificationCode(){this.emailForm.value.email&&this.store.sendResetCode(this.emailForm.value.email)}verifyCode(){this.codeForm.value.code&&this.store.verifyResetCode(this.codeForm.value.code)}updatePassword(){this.updatePasswordForm.valid&&this.updatePasswordForm.value.confirmPassword&&!this.updatePasswordForm.hasError("mismatch")&&this.store.updatePassword(this.updatePasswordForm.value.confirmPassword)}redirectToLogin(){}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=h({type:o,selectors:[["clovis-forgot-password"]],standalone:!0,features:[P],decls:11,vars:1,consts:[["collapse","fade"],[1,"ion-justify-content-center","ion-align-items-center","ion-text-center"],["alt","Enveloppe","src","https://res.cloudinary.com/dyewhr2lj/image/upload/v1668516112/Logo_Clovis_fxqyoh.png"],[1,"ion-padding"],[1,"ion-text-center","ion-margin"],[3,"ngSubmit","formGroup"],["fill","solid","label","Email","labelPlacement","floating","formControlName","email","type","text"],["expand","block","type","submit",1,"clovis",3,"disabled"],["fill","solid","label","Code de s\xE9curit\xE9","labelPlacement","floating","formControlName","code","type","password"],["fill","solid","label","Nouveau mot de passe","labelPlacement","floating","formControlName","newPassword","type","password"],["fill","solid","label","Confirmer le mot de passe","labelPlacement","floating","formControlName","confirmPassword","type","password"]],template:function(r,n){if(r&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-row",1)(3,"ion-thumbnail"),c(4,"img",2),i(),t(5,"p"),a(6,"clovis"),i()()()(),t(7,"ion-content",3),w(8,j,10,2)(9,D,8,2)(10,k,10,2),i()),r&2){let _;s(8),v((_=n.steps())===1?8:_===2?9:_===3?10:-1)}},dependencies:[L,O,R,I,q,B,N,T,G,V,F,S,b,E,y],styles:["ion-header[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 32px}ion-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:SofiaPro,sans-serif;font-weight:600;font-size:1.1em}ion-text[_ngcontent-%COMP%]{font-family:SofiaPro,sans-serif}ion-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600}ion-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300}ion-button[_ngcontent-%COMP%]{margin-top:50px}ion-input[_ngcontent-%COMP%]{font-family:SofiaPro,sans-serif;font-weight:500;--color: #54565c}"]})}}return o})();export{$ as ForgotPasswordComponent};
