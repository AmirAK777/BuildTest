{"version":3,"file":"offer-payments.mjs","sources":["../../../projects/offer-payments/src/lib/services/offers.infrastructure.ts","../../../projects/offer-payments/src/lib/store/index.ts","../../../projects/offer-payments/src/lib/services/offers.application.ts","../../../projects/offer-payments/src/public-api.ts","../../../projects/offer-payments/src/offer-payments.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { inject, Injectable } from '@angular/core';\r\nimport { Offers } from '../models/offers';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class OffersInfrastructure {\r\n  private readonly apiClovisUrl = 'https://localhost:5001';\r\n\r\n  private readonly _httpClient = inject(HttpClient);\r\n\r\n  getOffers(): Observable<Offers> {\r\n    return this._httpClient.get<Offers>(`${this.apiClovisUrl}/offers`);\r\n  }\r\n}\r\n","import {\r\n  patchState,\r\n  signalStore,\r\n  withHooks,\r\n  withMethods,\r\n  withState,\r\n} from '@ngrx/signals';\r\nimport { rxMethod } from '@ngrx/signals/rxjs-interop';\r\nimport { concatMap, pipe, tap } from 'rxjs';\r\nimport { tapResponse } from '@ngrx/operators';\r\nimport { OffersInfrastructure } from '../services/offers.infrastructure';\r\nimport { inject } from '@angular/core';\r\nimport { Offers } from '../models/offers';\r\n\r\nexport interface OffersState {\r\n  offers: Offers | undefined | null;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst initialValue: OffersState = {\r\n  offers: null,\r\n  isLoading: false,\r\n};\r\n\r\nexport const OffersStore = signalStore(\r\n  { providedIn: 'root' },\r\n  withState(initialValue),\r\n  withMethods((store, infra = inject(OffersInfrastructure)) => ({\r\n    getOffers: rxMethod<void>(\r\n      pipe(\r\n        tap(() => patchState(store, { isLoading: true })),\r\n        concatMap(() => {\r\n          return infra.getOffers().pipe(\r\n            tapResponse({\r\n              next: (offers) => patchState(store, { isLoading: false, offers }),\r\n              error: () => patchState(store, { isLoading: false }),\r\n            })\r\n          );\r\n        })\r\n      )\r\n    ),\r\n  })),\r\n  withHooks({\r\n    onInit(store) {\r\n      store.getOffers();\r\n    },\r\n  })\r\n);\r\n","import { inject, Injectable, Signal } from '@angular/core';\r\nimport { OffersStore } from '../store';\r\nimport { Offers } from '../models/offers';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class OffersApplication {\r\n  private readonly _store = inject(OffersStore);\r\n\r\n  getOffers() {\r\n    this._store.getOffers();\r\n  }\r\n\r\n  get offers(): Signal<Offers | null | undefined> {\r\n    return this._store.offers;\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of offer-payments\r\n */\r\n\r\nexport * from './lib/services/offers.application';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;;MAQa,oBAAoB,CAAA;AAHjC,IAAA,WAAA,GAAA;QAImB,IAAY,CAAA,YAAA,GAAG,wBAAwB,CAAC;AAExC,QAAA,IAAA,CAAA,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;AAKnD,KAAA;IAHC,SAAS,GAAA;AACP,QAAA,OAAO,IAAI,CAAC,WAAW,CAAC,GAAG,CAAS,CAAG,EAAA,IAAI,CAAC,YAAY,CAAS,OAAA,CAAA,CAAC,CAAC;KACpE;+GAPU,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA,EAAA;AAApB,IAAA,SAAA,IAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,oBAAoB,cAFnB,MAAM,EAAA,CAAA,CAAA,EAAA;;4FAEP,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAHhC,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE,MAAM;AACnB,iBAAA,CAAA;;;ACYD,MAAM,YAAY,GAAgB;AAChC,IAAA,MAAM,EAAE,IAAI;AACZ,IAAA,SAAS,EAAE,KAAK;CACjB,CAAC;AAEK,MAAM,WAAW,GAAG,WAAW,CACpC,EAAE,UAAU,EAAE,MAAM,EAAE,EACtB,SAAS,CAAC,YAAY,CAAC,EACvB,WAAW,CAAC,CAAC,KAAK,EAAE,KAAK,GAAG,MAAM,CAAC,oBAAoB,CAAC,MAAM;IAC5D,SAAS,EAAE,QAAQ,CACjB,IAAI,CACF,GAAG,CAAC,MAAM,UAAU,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,EACjD,SAAS,CAAC,MAAK;QACb,OAAO,KAAK,CAAC,SAAS,EAAE,CAAC,IAAI,CAC3B,WAAW,CAAC;AACV,YAAA,IAAI,EAAE,CAAC,MAAM,KAAK,UAAU,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;AACjE,YAAA,KAAK,EAAE,MAAM,UAAU,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;AACrD,SAAA,CAAC,CACH,CAAC;KACH,CAAC,CACH,CACF;CACF,CAAC,CAAC,EACH,SAAS,CAAC;AACR,IAAA,MAAM,CAAC,KAAK,EAAA;QACV,KAAK,CAAC,SAAS,EAAE,CAAC;KACnB;AACF,CAAA,CAAC,CACH;;MCxCY,iBAAiB,CAAA;AAH9B,IAAA,WAAA,GAAA;AAImB,QAAA,IAAA,CAAA,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;AAS/C,KAAA;IAPC,SAAS,GAAA;AACP,QAAA,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;KACzB;AAED,IAAA,IAAI,MAAM,GAAA;AACR,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;KAC3B;+GATU,iBAAiB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA,EAAA;AAAjB,IAAA,SAAA,IAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,iBAAiB,cAFhB,MAAM,EAAA,CAAA,CAAA,EAAA;;4FAEP,iBAAiB,EAAA,UAAA,EAAA,CAAA;kBAH7B,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE,MAAM;AACnB,iBAAA,CAAA;;;ACND;;AAEG;;ACFH;;AAEG;;;;"}