<ion-header collapse="fade">
  <ion-toolbar>
    <ion-row
      class="ion-justify-content-center ion-align-items-center ion-text-center"
    >
      <ion-thumbnail>
        <img
          alt="Enveloppe"
          src="https://res.cloudinary.com/dyewhr2lj/image/upload/v1668516112/Logo_Clovis_fxqyoh.png"
        />
      </ion-thumbnail>
      <p>clovis</p>
    </ion-row>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  @switch (steps()) { @case (1) {
  <ion-text class="ion-text-center ion-margin">
    <h3>Réinitialisation de votre mot de passe</h3>
    <p>Nous vous enverrons un code de vérification à votre adresse email</p>
  </ion-text>
  <form [formGroup]="emailForm" (ngSubmit)="sendVerificationCode()">
    <ion-item>
      <ion-input
        fill="solid"
        label="Email"
        labelPlacement="floating"
        formControlName="email"
        type="text"
      ></ion-input>
    </ion-item>

    <ion-button
      class="clovis"
      [disabled]="emailForm.invalid"
      expand="block"
      type="submit"
      >Envoyer le code de vérification</ion-button
    >
  </form>
  } @case (2) {
  <ion-text class="ion-text-center ion-margin">
    <h3>Saisissez le code à 6 chiffres que vous avec reçu par email</h3>
  </ion-text>

  <form [formGroup]="codeForm" (ngSubmit)="verifyCode()">
    <ion-item>
      <ion-input
        fill="solid"
        label="Code de sécurité"
        labelPlacement="floating"
        formControlName="code"
        type="password"
      ></ion-input>
    </ion-item>

    <ion-button
      class="clovis"
      expand="block"
      type="submit"
      [disabled]="codeForm.invalid"
      >Valider</ion-button
    >
  </form>
  } @case (3) {
  <ion-text class="ion-text-center ion-margin">
    <h3>Parfait ! Saisissez votre nouveau mot de passe</h3>
  </ion-text>

  <form [formGroup]="updatePasswordForm" (ngSubmit)="updatePassword()">
    <ion-item>
      <ion-input
        fill="solid"
        label="Nouveau mot de passe"
        labelPlacement="floating"
        formControlName="newPassword"
        type="password"
      ></ion-input>
    </ion-item>
    <ion-item>
      <ion-input
        fill="solid"
        label="Confirmer le mot de passe"
        labelPlacement="floating"
        formControlName="confirmPassword"
        type="password"
      ></ion-input>
    </ion-item>

    <ion-button
      class="clovis"
      expand="block"
      type="submit"
      [disabled]="updatePasswordForm.invalid"
      >Valider</ion-button
    >
  </form>
  } }
</ion-content>
